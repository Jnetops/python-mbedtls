[tox]
envlist = py{27,34,35,36},py36-doctest,py36-readme
skipsdist = True

[testenv]
deps =
  -rrequirements.txt
  py27: -rrequirements-27.txt
  -rrequirements-tests.txt
passenv =
  LD_LIBRARY_PATH
  DYLD_LIBRARY_PATH
  C_INCLUDE_PATH
commands =
  python -m pip install -e .
  python -m pytest mbedtls tests

[testenv:doctest]
envdir = {toxworkdir}/py36
skip_install = True
commands = python -m doctest README.rst

[testenv:readme]
envdir = {toxworkdir}/py36
deps = readme_renderer
skip_install = True
commands = python setup.py check -r -s
